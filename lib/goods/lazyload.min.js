var lazyload_list = [];

var lazyload_selector = ".lazyload";

var lazyload_list_set = function(){
	lazyload_list = [];
	jQuery(lazyload_selector).each(function(){
		lazyload_list.push(jQuery(this).offset().top);
	});
}

var lazyload_check = function(){
	var st = jQuery(window).scrollTop();
	var wh = jQuery(window).height();
	jQuery(lazyload_list).each(function(i){
		if((st + wh) > lazyload_list[i]){
			var tgt = jQuery(lazyload_selector+':eq('+i+')');
			if(!tgt.hasClass('loaded')){
				src = tgt.data('src');
				tgt.attr('src',src).addClass('loaded');
				tgt.closest('.img').addClass('imgshow');
			}
		}
	});
}

jQuery(function(){
	lazyload_list_set();
});
jQuery(window).resize(function(){
	lazyload_list_set();
});
jQuery(window).load(function(){
	lazyload_list_set();
	lazyload_check();
});
jQuery(window).scroll(function(){
	lazyload_check();
});
